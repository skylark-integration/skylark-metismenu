/**
 * skylark-metismenu - A version of metismenu that ported to running on skylarkjs ui.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-metismenu/
 * @license MIT
 */
!function(e,t){var n=t.define,require=t.require,i="function"==typeof n&&n.amd,r=!i&&"undefined"!=typeof exports;if(!i&&!n){var s={};n=t.define=function(e,t,n){"function"==typeof n?(s[e]={factory:n,deps:t.map(function(t){return function(e,t){if("."!==e[0])return e;var n=t.split("/"),i=e.split("/");n.pop();for(var r=0;r<i.length;r++)"."!=i[r]&&(".."==i[r]?n.pop():n.push(i[r]));return n.join("/")}(t,e)}),resolved:!1,exports:null},require(e)):s[e]={factory:null,resolved:!0,exports:n}},require=t.require=function(e){if(!s.hasOwnProperty(e))throw new Error("Module "+e+" has not been defined");var module=s[e];if(!module.resolved){var n=[];module.deps.forEach(function(e){n.push(require(e))}),module.exports=module.factory.apply(t,n)||null,module.resolved=!0}return module.exports}}if(!n)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(e,require){e("skylark-metismenu/MetisMenu",["skylark-langx/skylark","skylark-jquery"],function(e,t){const n="transitionend",i="metisMenu",r="metisMenu",s=`.${r}`,a=t.fn[i],o=350,l={toggle:!0,preventDefault:!0,triggerElement:"a",parentTrigger:"li",subMenu:"ul"},g={SHOW:`show${s}`,SHOWN:`shown${s}`,HIDE:`hide${s}`,HIDDEN:`hidden${s}`,CLICK_DATA_API:`click${s}.data-api`},h={METIS:"metismenu",ACTIVE:"mm-active",SHOW:"mm-show",COLLAPSE:"mm-collapse",COLLAPSING:"mm-collapsing",COLLAPSED:"mm-collapsed"};class d{constructor(e,t){this.element=e,this.config={...l,...t},this.transitioning=null,this.init()}init(){const e=this,n=this.config,i=t(this.element);i.addClass(h.METIS),i.find(`${n.parentTrigger}.${h.ACTIVE}`).children(n.triggerElement).attr("aria-expanded","true"),i.find(`${n.parentTrigger}.${h.ACTIVE}`).parents(n.parentTrigger).addClass(h.ACTIVE),i.find(`${n.parentTrigger}.${h.ACTIVE}`).parents(n.parentTrigger).children(n.triggerElement).attr("aria-expanded","true"),i.find(`${n.parentTrigger}.${h.ACTIVE}`).has(n.subMenu).children(n.subMenu).addClass(`${h.COLLAPSE} ${h.SHOW}`),i.find(n.parentTrigger).not(`.${h.ACTIVE}`).has(n.subMenu).children(n.subMenu).addClass(h.COLLAPSE),i.find(n.parentTrigger).children(n.triggerElement).on(g.CLICK_DATA_API,function(i){const r=t(this);if("true"===r.attr("aria-disabled"))return;n.preventDefault&&"#"===r.attr("href")&&i.preventDefault();const s=r.parent(n.parentTrigger),a=s.siblings(n.parentTrigger),o=a.children(n.triggerElement);s.hasClass(h.ACTIVE)?(r.attr("aria-expanded","false"),e.removeActive(s)):(r.attr("aria-expanded","true"),e.setActive(s),n.toggle&&(e.removeActive(a),o.attr("aria-expanded","false"))),n.onTransitionStart&&n.onTransitionStart(i)})}setActive(e){t(e).addClass(h.ACTIVE);const n=t(e).children(this.config.subMenu);n.length>0&&!n.hasClass(h.SHOW)&&this.show(n)}removeActive(e){t(e).removeClass(h.ACTIVE);const n=t(e).children(`${this.config.subMenu}.${h.SHOW}`);n.length>0&&this.hide(n)}show(e){if(this.transitioning||t(e).hasClass(h.COLLAPSING))return;const i=t(e),r=t.Event(g.SHOW);if(i.trigger(r),r.isDefaultPrevented())return;if(i.parent(this.config.parentTrigger).addClass(h.ACTIVE),this.config.toggle){const e=i.parent(this.config.parentTrigger).siblings().children(`${this.config.subMenu}.${h.SHOW}`);this.hide(e)}i.removeClass(h.COLLAPSE).addClass(h.COLLAPSING).height(0),this.setTransitioning(!0);i.height(e[0].scrollHeight).one(n,()=>{if(!this.config||!this.element)return;i.removeClass(h.COLLAPSING).addClass(`${h.COLLAPSE} ${h.SHOW}`).height(""),this.setTransitioning(!1),i.trigger(g.SHOWN)}).emulateTransitionEnd(o)}hide(e){if(this.transitioning||!t(e).hasClass(h.SHOW))return;const i=t(e),r=t.Event(g.HIDE);if(i.trigger(r),r.isDefaultPrevented())return;i.parent(this.config.parentTrigger).removeClass(h.ACTIVE),i.height(i.height())[0].offsetHeight,i.addClass(h.COLLAPSING).removeClass(h.COLLAPSE).removeClass(h.SHOW),this.setTransitioning(!0);const s=()=>{this.config&&this.element&&(this.transitioning&&this.config.onTransitionEnd&&this.config.onTransitionEnd(),this.setTransitioning(!1),i.trigger(g.HIDDEN),i.removeClass(h.COLLAPSING).addClass(h.COLLAPSE))};0===i.height()||"none"===i.css("display")?s():i.height(0).one(n,s).emulateTransitionEnd(o)}setTransitioning(e){this.transitioning=e}dispose(){t.removeData(this.element,r),t(this.element).find(this.config.parentTrigger).children(this.config.triggerElement).off(g.CLICK_DATA_API),this.transitioning=null,this.config=null,this.element=null}static jQueryInterface(e){return this.each(function(){const n=t(this);let i=n.data(r);const s={...l,...n.data(),..."object"==typeof e&&e?e:{}};if(i||(i=new d(this,s),n.data(r,i)),"string"==typeof e){if(void 0===i[e])throw new Error(`No method named "${e}"`);i[e]()}})}}return t.fn[i]=d.jQueryInterface,t.fn[i].Constructor=d,t.fn[i].noConflict=(()=>(t.fn[i]=a,d.jQueryInterface)),e.attach("intg.MetisMenu",d)}),e("skylark-metismenu/main",["./MetisMenu"],function(e){return e}),e("skylark-metismenu",["skylark-metismenu/main"],function(e){return e})}(n),!i){var a=require("skylark-langx/skylark");r?module.exports=a:t.skylarkjs=a}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-metismenu.js.map
