/**
 * skylark-metismenu - A version of metismenu that ported to running on skylarkjs ui.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-metismenu/
 * @license MIT
 */
define(["skylark-langx/skylark","skylark-jquery"],function(e,t){const i="transitionend",n="metisMenu",s="metisMenu",r=`.${s}`,a=t.fn[n],g=350,o={toggle:!0,preventDefault:!0,triggerElement:"a",parentTrigger:"li",subMenu:"ul"},h={SHOW:`show${r}`,SHOWN:`shown${r}`,HIDE:`hide${r}`,HIDDEN:`hidden${r}`,CLICK_DATA_API:`click${r}.data-api`},l={METIS:"metismenu",ACTIVE:"mm-active",SHOW:"mm-show",COLLAPSE:"mm-collapse",COLLAPSING:"mm-collapsing",COLLAPSED:"mm-collapsed"};class d{constructor(e,t){this.element=e,this.config={...o,...t},this.transitioning=null,this.init()}init(){const e=this,i=this.config,n=t(this.element);n.addClass(l.METIS),n.find(`${i.parentTrigger}.${l.ACTIVE}`).children(i.triggerElement).attr("aria-expanded","true"),n.find(`${i.parentTrigger}.${l.ACTIVE}`).parents(i.parentTrigger).addClass(l.ACTIVE),n.find(`${i.parentTrigger}.${l.ACTIVE}`).parents(i.parentTrigger).children(i.triggerElement).attr("aria-expanded","true"),n.find(`${i.parentTrigger}.${l.ACTIVE}`).has(i.subMenu).children(i.subMenu).addClass(`${l.COLLAPSE} ${l.SHOW}`),n.find(i.parentTrigger).not(`.${l.ACTIVE}`).has(i.subMenu).children(i.subMenu).addClass(l.COLLAPSE),n.find(i.parentTrigger).children(i.triggerElement).on(h.CLICK_DATA_API,function(n){const s=t(this);if("true"===s.attr("aria-disabled"))return;i.preventDefault&&"#"===s.attr("href")&&n.preventDefault();const r=s.parent(i.parentTrigger),a=r.siblings(i.parentTrigger),g=a.children(i.triggerElement);r.hasClass(l.ACTIVE)?(s.attr("aria-expanded","false"),e.removeActive(r)):(s.attr("aria-expanded","true"),e.setActive(r),i.toggle&&(e.removeActive(a),g.attr("aria-expanded","false"))),i.onTransitionStart&&i.onTransitionStart(n)})}setActive(e){t(e).addClass(l.ACTIVE);const i=t(e).children(this.config.subMenu);i.length>0&&!i.hasClass(l.SHOW)&&this.show(i)}removeActive(e){t(e).removeClass(l.ACTIVE);const i=t(e).children(`${this.config.subMenu}.${l.SHOW}`);i.length>0&&this.hide(i)}show(e){if(this.transitioning||t(e).hasClass(l.COLLAPSING))return;const n=t(e),s=t.Event(h.SHOW);if(n.trigger(s),s.isDefaultPrevented())return;if(n.parent(this.config.parentTrigger).addClass(l.ACTIVE),this.config.toggle){const e=n.parent(this.config.parentTrigger).siblings().children(`${this.config.subMenu}.${l.SHOW}`);this.hide(e)}n.removeClass(l.COLLAPSE).addClass(l.COLLAPSING).height(0),this.setTransitioning(!0);n.height(e[0].scrollHeight).one(i,()=>{this.config&&this.element&&(n.removeClass(l.COLLAPSING).addClass(`${l.COLLAPSE} ${l.SHOW}`).height(""),this.setTransitioning(!1),n.trigger(h.SHOWN))}).emulateTransitionEnd(g)}hide(e){if(this.transitioning||!t(e).hasClass(l.SHOW))return;const n=t(e),s=t.Event(h.HIDE);if(n.trigger(s),s.isDefaultPrevented())return;n.parent(this.config.parentTrigger).removeClass(l.ACTIVE),n.height(n.height())[0].offsetHeight,n.addClass(l.COLLAPSING).removeClass(l.COLLAPSE).removeClass(l.SHOW),this.setTransitioning(!0);const r=()=>{this.config&&this.element&&(this.transitioning&&this.config.onTransitionEnd&&this.config.onTransitionEnd(),this.setTransitioning(!1),n.trigger(h.HIDDEN),n.removeClass(l.COLLAPSING).addClass(l.COLLAPSE))};0===n.height()||"none"===n.css("display")?r():n.height(0).one(i,r).emulateTransitionEnd(g)}setTransitioning(e){this.transitioning=e}dispose(){t.removeData(this.element,s),t(this.element).find(this.config.parentTrigger).children(this.config.triggerElement).off(h.CLICK_DATA_API),this.transitioning=null,this.config=null,this.element=null}static jQueryInterface(e){return this.each(function(){const i=t(this);let n=i.data(s);const r={...o,...i.data(),..."object"==typeof e&&e?e:{}};if(n||(n=new d(this,r),i.data(s,n)),"string"==typeof e){if(void 0===n[e])throw new Error(`No method named "${e}"`);n[e]()}})}}return t.fn[n]=d.jQueryInterface,t.fn[n].Constructor=d,t.fn[n].noConflict=(()=>(t.fn[n]=a,d.jQueryInterface)),e.attach("intg.MetisMenu",d)});
//# sourceMappingURL=sourcemaps/MetisMenu.js.map
